<!-- Based on: https://stackoverflow.com/a/53218452 -->
<html>
  <style>
    li {
      list-style-type: none;
    }
    #pulls > ul {
      padding: 0;
    }
    #pulls > ul > li {
      margin-bottom: 20px;
    }
    #pulls > ul > li > h2 {
      margin-bottom: 10px;
    }
  </style>
  <body>
    <h1>Open Pull Requests 🛠️</h1>
    <a href="..">⬅️ Back to Landing</a>
    <div id="pulls"></div>
    <script>
      (async () => {
        const response = await fetch("https://api.github.com/repos/la-ldaf/ldaf-site/pulls?state=open");
        const data = await response.json();
        let htmlString = "<ul class='prs'>";
        
        for (let pr of data) {
          const { html_url, number, title, user, draft  } = pr;
          htmlString += `
          <li>
            <h2><a href="${html_url}">#${number} - ${title}</a></h2>
            <span>✒️ by <a href="${user.html_url}">${user.login}</a></span>
            <br/>
            <span>${ draft && "📝 In Draft" || "👀 Ready for Review"}</span>
            <ul>
              <li>📊 <a href="${number}/unit-test-coverage">Unit Test Coverage Report</a></li>
              <li>🖥️ <a href="${number}/e2e-test-report">End-to-End Test Report</a></li>
            </ul>
          </li>
          `;
        }

        htmlString += "</ul>";
        document.getElementById("pulls").innerHTML = htmlString;
      })()
    </script>
  <body>
</html>